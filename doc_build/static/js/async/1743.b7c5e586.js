"use strict";(self.webpackChunkrepress_demo=self.webpackChunkrepress_demo||[]).push([["1743"],{2892:function(e,n,r){r.r(n),r.d(n,{default:()=>d});var i=r(2676),s=r(453);function c(e){let n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",ul:"ul",li:"li",pre:"pre",code:"code"},(0,s.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"scriptengine",children:["ScriptEngine",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#scriptengine",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"脚本引擎对象。"}),"\n",(0,i.jsxs)(n.h2,{id:"scriptengineisdestroyed",children:["ScriptEngine.isDestroyed()",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#scriptengineisdestroyed",children:"#"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"返回 {Boolean}"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"检测该脚本是否执行结束"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'let e = engines.execScriptFile("xx.js");\r\nsleep(2000);\r\nlog(e.getEngine().isDestroyed())\n'})}),"\n",(0,i.jsxs)(n.h2,{id:"scriptengineforcestop",children:["ScriptEngine.forceStop()",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#scriptengineforcestop",children:"#"})]}),"\n",(0,i.jsx)(n.p,{children:"停止脚本引擎的执行。"}),"\n",(0,i.jsxs)(n.h2,{id:"scriptenginecwd",children:["ScriptEngine.cwd()",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#scriptenginecwd",children:"#"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"返回 {string}"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["返回脚本执行的路径。对于一个脚本文件而言为这个脚本所在的文件夹；对于其他脚本，例如字符串脚本，则为",(0,i.jsx)(n.code,{children:"null"}),"或者执行时的设置值。"]}),"\n",(0,i.jsxs)(n.h2,{id:"scriptenginegetsource",children:["ScriptEngine.getSource()",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#scriptenginegetsource",children:"#"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["返回 ",(0,i.jsx)(n.a,{href:"#scriptsource",children:"ScriptSource"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"返回当前脚本引擎正在执行的脚本对象。"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"log(engines.myEngine().getSource());\n"})}),"\n",(0,i.jsxs)(n.h2,{id:"scriptengineemiteventname-args",children:["ScriptEngine.emit(eventName[, ...args])",(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#scriptengineemiteventname-args",children:"#"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"eventName"})," {string} 事件名称"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"...args"})," {any} 事件参数"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"向该脚本引擎发送一个事件，该事件可以在该脚本引擎对应的脚本的 events 模块监听到并在脚本主线程执行事件处理。"}),"\n",(0,i.jsx)(n.p,{children:"例如脚本 receiver.js 的内容如下："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'//监听 say 事件\r\nevents.on("say", function (words) {\r\n    toastLog(words);\r\n});\r\n//保持脚本运行\r\nsetInterval(() => {}, 1000);\n'})}),"\n",(0,i.jsx)(n.p,{children:"同一目录另一脚本可以启动他并发送该事件："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'//运行脚本\r\nvar e = engines.execScriptFile("./receiver.js");\r\n//等待脚本启动\r\nsleep(2000);\r\n//向该脚本发送事件\r\ne.getEngine().emit("say", "你好");\n'})})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}let d=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["v1%2F%E9%AB%98%E7%BA%A7%2Fengines%2FscriptEngine.md"]={toc:[{text:"ScriptEngine.isDestroyed()",id:"scriptengineisdestroyed",depth:2},{text:"ScriptEngine.forceStop()",id:"scriptengineforcestop",depth:2},{text:"ScriptEngine.cwd()",id:"scriptenginecwd",depth:2},{text:"ScriptEngine.getSource()",id:"scriptenginegetsource",depth:2},{text:"ScriptEngine.emit(eventName[, ...args])",id:"scriptengineemiteventname-args",depth:2}],title:"ScriptEngine",headingTitle:"ScriptEngine",frontmatter:{}}}}]);