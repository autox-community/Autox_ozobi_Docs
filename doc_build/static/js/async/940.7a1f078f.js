"use strict";(self.webpackChunkrepress_demo=self.webpackChunkrepress_demo||[]).push([["940"],{909:function(e,n,i){i.r(n),i.d(n,{default:()=>a});var s=i(2676),t=i(453);function r(e){let n=Object.assign({h2:"h2",a:"a",p:"p",strong:"strong",code:"code",h3:"h3",br:"br",ul:"ul",li:"li",pre:"pre",h4:"h4"},(0,t.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h2,{id:"am-命令",children:["am 命令",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#am-命令",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"am 命令即 Activity Manager 命令，用于管理应用程序活动、服务等。"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:['以下命令均以"am "开头，例如',(0,s.jsx)(n.code,{children:"shell('am start -p com.tencent.mm');"}),"(启动微信)"]})}),"\n",(0,s.jsxs)(n.h3,{id:"start-options-intent",children:["start [options] intent",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#start-options-intent",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["启动 intent 指定的 Activity(应用程序活动)。",(0,s.jsx)(n.br,{}),"\n","请参阅 ",(0,s.jsx)(n.a,{href:"#shell_intent",children:"intent 参数的规范"}),"。"]}),"\n",(0,s.jsx)(n.p,{children:"选项包括："}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"-D：启用调试。"}),"\n",(0,s.jsx)(n.li,{children:"-W：等待启动完成。"}),"\n",(0,s.jsx)(n.li,{children:"--start-profiler file：启动分析器并将结果发送到 file。"}),"\n",(0,s.jsx)(n.li,{children:"-P file：类似于 --start-profiler，但当应用进入空闲状态时分析停止。"}),"\n",(0,s.jsx)(n.li,{children:"-R count：重复 Activity 启动 count 次数。在每次重复前，将完成顶部 Activity。"}),"\n",(0,s.jsx)(n.li,{children:"-S：启动 Activity 前强行停止目标应用。"}),"\n",(0,s.jsx)(n.li,{children:"--opengl-trace：启用 OpenGL 函数的跟踪。"}),"\n",(0,s.jsx)(n.li,{children:"--user user_id | current：指定要作为哪个用户运行；如果未指定，则作为当前用户运行。"}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"startservice-options-intent",children:["startservice [options] intent",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#startservice-options-intent",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["启动 intent 指定的 Service(服务)。",(0,s.jsx)(n.br,{}),"\n","请参阅 ",(0,s.jsx)(n.a,{href:"#shell_intent",children:"intent 参数的规范"}),"。",(0,s.jsx)(n.br,{}),"\n","选项包括："]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"--user user_id | current：指定要作为哪个用户运行；如果未指定，则作为当前用户运行。"}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"force-stop-package",children:["force-stop package",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#force-stop-package",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["强行停止与 package（",(0,s.jsx)(n.a,{href:"#%E5%BA%94%E7%94%A8%E5%8C%85%E5%90%8D",children:"应用包名"}),"）关联的所有应用。"]}),"\n",(0,s.jsxs)(n.h3,{id:"kill-options-package",children:["kill [options] package",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#kill-options-package",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["终止与 package（",(0,s.jsx)(n.a,{href:"#%E5%BA%94%E7%94%A8%E5%8C%85%E5%90%8D",children:"应用包名"}),"）关联的所有进程。此命令仅终止可安全终止且不会影响用户体验的进程。",(0,s.jsx)(n.br,{}),"\n","选项包括："]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"--user user_id | all | current：指定将终止其进程的用户；如果未指定，则终止所有用户的进程。"}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"kill-all",children:["kill-all",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#kill-all",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"终止所有后台进程。"}),"\n",(0,s.jsxs)(n.h3,{id:"broadcast-options-intent",children:["broadcast [options] intent",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#broadcast-options-intent",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["发出广播 intent。\r\n请参阅 ",(0,s.jsx)(n.a,{href:"#shell_intent",children:"intent 参数的规范"}),"。"]}),"\n",(0,s.jsx)(n.p,{children:"选项包括："}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"[--user user_id | all | current]：指定要发送到的用户；如果未指定，则发送到所有用户。"}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"instrument-options-component",children:["instrument [options] component",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#instrument-options-component",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["使用 Instrumentation 实例启动监控。通常，目标 component 是表单 test_package/runner_class。",(0,s.jsx)(n.br,{}),"\n","选项包括："]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"-r：输出原始结果（否则对 report_key_streamresult 进行解码）。与 [-e perf true] 结合使用以生成性能测量的原始输出。"}),"\n",(0,s.jsx)(n.li,{children:"-e name value：将参数 name 设为 value。对于测试运行器，通用表单为 -e testrunner_flag value[,value...]。"}),"\n",(0,s.jsx)(n.li,{children:"-p file：将分析数据写入 file。"}),"\n",(0,s.jsx)(n.li,{children:"-w：先等待仪器完成，然后再返回。测试运行器需要使用此选项。"}),"\n",(0,s.jsx)(n.li,{children:"--no-window-animation：运行时关闭窗口动画。"}),"\n",(0,s.jsx)(n.li,{children:"--user user_id | current：指定仪器在哪个用户中运行；如果未指定，则在当前用户中运行。"}),"\n",(0,s.jsx)(n.li,{children:"profile start process file 启动 process 的分析器，将结果写入 file。"}),"\n",(0,s.jsx)(n.li,{children:"profile stop process 停止 process 的分析器。"}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"dumpheap-options-process-file",children:["dumpheap [options] process file",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#dumpheap-options-process-file",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"转储 process 的堆，写入 file。"}),"\n",(0,s.jsx)(n.p,{children:"选项包括："}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"--user [user_id|current]：提供进程名称时，指定要转储的进程用户；如果未指定，则使用当前用户。"}),"\n",(0,s.jsx)(n.li,{children:"-n：转储原生堆，而非托管堆。"}),"\n",(0,s.jsx)(n.li,{children:"set-debug-app [options] package 将应用 package 设为调试。"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"选项包括："}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"-w：应用启动时等待调试程序。"}),"\n",(0,s.jsx)(n.li,{children:"--persistent：保留此值。"}),"\n",(0,s.jsx)(n.li,{children:"clear-debug-app 使用 set-debug-app 清除以前针对调试用途设置的软件包。"}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"monitor-options-启动对崩溃或-anr-的监控",children:["monitor [options] 启动对崩溃或 ANR 的监控。",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#monitor-options-启动对崩溃或-anr-的监控",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"选项包括："}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"--gdb：在崩溃/ANR 时在给定端口上启动 gdbserv。"}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"screen-compat-onoff-package",children:["screen-compat {on|off} package",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#screen-compat-onoff-package",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"控制 package 的屏幕兼容性模式。"}),"\n",(0,s.jsxs)(n.h3,{id:"display-size-resetwidthxheight",children:["display-size [reset|widthxheight]",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#display-size-resetwidthxheight",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["替换模拟器/设备显示尺寸。此命令对于在不同尺寸的屏幕上测试您的应用非常有用，它支持使用大屏设备模仿小屏幕分辨率（反之亦然）。",(0,s.jsx)(n.br,{}),"\n","示例："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'shell("am display-size 1280x800", true);\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"display-density-dpi",children:["display-density dpi",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#display-density-dpi",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["替换模拟器/设备显示密度。此命令对于在不同密度的屏幕上测试您的应用非常有用，它支持使用低密度屏幕在高密度环境环境上进行测试（反之亦然）。",(0,s.jsx)(n.br,{}),"\n","示例："]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'shell("am display-density 480", true);\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"to-uri-intent",children:["to-uri intent",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#to-uri-intent",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["将给定的 intent 规范以 URI 的形式输出。\r\n请参阅 ",(0,s.jsx)(n.a,{href:"#shell_intent",children:"intent 参数的规范"}),"。"]}),"\n",(0,s.jsxs)(n.h3,{id:"to-intent-uri-intent",children:["to-intent-uri intent",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#to-intent-uri-intent",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"将给定的 intent 规范以 intent:URI 的形式输出。\r\n请参阅 intent 参数的规范。"}),"\n",(0,s.jsxs)(n.h3,{id:"intent-参数的规范",children:["intent 参数的规范",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#intent-参数的规范",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"对于采用 intent 参数的 am 命令，您可以使用以下选项指定 intent："}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["-a action",(0,s.jsx)(n.br,{}),"\n","指定 intent 操作，如“android.intent.action.VIEW”。此指定只能声明一次。"]}),"\n",(0,s.jsxs)(n.li,{children:["-d data_uri",(0,s.jsx)(n.br,{}),"\n","指定 intent 数据 URI，如“content://contacts/people/1”。此指定只能声明一次。"]}),"\n",(0,s.jsxs)(n.li,{children:["-t mime_type",(0,s.jsx)(n.br,{}),"\n","指定 intent MIME 类型，如“image/png”。此指定只能声明一次。"]}),"\n",(0,s.jsxs)(n.li,{children:["-c category",(0,s.jsx)(n.br,{}),"\n","指定 intent 类别，如“android.intent.category.APP_CONTACTS”。"]}),"\n",(0,s.jsxs)(n.li,{children:["-n component",(0,s.jsx)(n.br,{}),"\n","指定带有软件包名称前缀的组件名称以创建显式 intent，如“com.example.app/.ExampleActivity”。"]}),"\n",(0,s.jsxs)(n.li,{children:["-f flags",(0,s.jsx)(n.br,{}),"\n","将标志添加到 setFlags() 支持的 intent。"]}),"\n",(0,s.jsxs)(n.li,{children:["--esn extra_key",(0,s.jsx)(n.br,{}),"\n","添加一个 null extra。URI intent 不支持此选项。"]}),"\n",(0,s.jsxs)(n.li,{children:["-e|--es extra_key extra_string_value",(0,s.jsx)(n.br,{}),"\n","添加字符串数据作为键值对。"]}),"\n",(0,s.jsxs)(n.li,{children:["--ez extra_key extra_boolean_value",(0,s.jsx)(n.br,{}),"\n","添加布尔型数据作为键值对。"]}),"\n",(0,s.jsxs)(n.li,{children:["--ei extra_key extra_int_value",(0,s.jsx)(n.br,{}),"\n","添加整数型数据作为键值对。"]}),"\n",(0,s.jsxs)(n.li,{children:["--el extra_key extra_long_value",(0,s.jsx)(n.br,{}),"\n","添加长整型数据作为键值对。"]}),"\n",(0,s.jsxs)(n.li,{children:["--ef extra_key extra_float_value",(0,s.jsx)(n.br,{}),"\n","添加浮点型数据作为键值对。"]}),"\n",(0,s.jsxs)(n.li,{children:["--eu extra_key extra_uri_value",(0,s.jsx)(n.br,{}),"\n","添加 URI 数据作为键值对。"]}),"\n",(0,s.jsxs)(n.li,{children:["--ecn extra_key extra_component_name_value",(0,s.jsx)(n.br,{}),"\n","添加组件名称，将其作为 ComponentName 对象进行转换和传递。"]}),"\n",(0,s.jsxs)(n.li,{children:["--eia extra_key extra_int_value[,extra_int_value...]",(0,s.jsx)(n.br,{}),"\n","添加整数数组。"]}),"\n",(0,s.jsxs)(n.li,{children:["--ela extra_key extra_long_value[,extra_long_value...]",(0,s.jsx)(n.br,{}),"\n","添加长整型数组。"]}),"\n",(0,s.jsxs)(n.li,{children:["--efa extra_key extra_float_value[,extra_float_value...]",(0,s.jsx)(n.br,{}),"\n","添加浮点型数组。"]}),"\n",(0,s.jsxs)(n.li,{children:["--grant-read-uri-permission",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_GRANT_READ_URI_PERMISSION。"]}),"\n",(0,s.jsxs)(n.li,{children:["--grant-write-uri-permission",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_GRANT_WRITE_URI_PERMISSION。"]}),"\n",(0,s.jsxs)(n.li,{children:["--debug-log-resolution",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_DEBUG_LOG_RESOLUTION。"]}),"\n",(0,s.jsxs)(n.li,{children:["--exclude-stopped-packages",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_EXCLUDE_STOPPED_PACKAGES。"]}),"\n",(0,s.jsxs)(n.li,{children:["--include-stopped-packages",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_INCLUDE_STOPPED_PACKAGES。"]}),"\n",(0,s.jsxs)(n.li,{children:["--activity-brought-to-front",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_ACTIVITY_BROUGHT_TO_FRONT。"]}),"\n",(0,s.jsxs)(n.li,{children:["--activity-clear-top",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_ACTIVITY_CLEAR_TOP。"]}),"\n",(0,s.jsxs)(n.li,{children:["--activity-clear-when-task-reset",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET。"]}),"\n",(0,s.jsxs)(n.li,{children:["--activity-exclude-from-recents",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS。"]}),"\n",(0,s.jsxs)(n.li,{children:["--activity-launched-from-history",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY。"]}),"\n",(0,s.jsxs)(n.li,{children:["--activity-multiple-task",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_ACTIVITY_MULTIPLE_TASK。"]}),"\n",(0,s.jsxs)(n.li,{children:["--activity-no-animation",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_ACTIVITY_NO_ANIMATION。"]}),"\n",(0,s.jsxs)(n.li,{children:["--activity-no-history",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_ACTIVITY_NO_HISTORY。"]}),"\n",(0,s.jsxs)(n.li,{children:["--activity-no-user-action",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_ACTIVITY_NO_USER_ACTION。"]}),"\n",(0,s.jsxs)(n.li,{children:["--activity-previous-is-top",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_ACTIVITY_PREVIOUS_IS_TOP。"]}),"\n",(0,s.jsxs)(n.li,{children:["--activity-reorder-to-front",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_ACTIVITY_REORDER_TO_FRONT。"]}),"\n",(0,s.jsxs)(n.li,{children:["--activity-reset-task-if-needed",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_ACTIVITY_RESET_TASK_IF_NEEDED。"]}),"\n",(0,s.jsxs)(n.li,{children:["--activity-single-top",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_ACTIVITY_SINGLE_TOP。"]}),"\n",(0,s.jsxs)(n.li,{children:["--activity-clear-task",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_ACTIVITY_CLEAR_TASK。"]}),"\n",(0,s.jsxs)(n.li,{children:["--activity-task-on-home",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_ACTIVITY_TASK_ON_HOME。"]}),"\n",(0,s.jsxs)(n.li,{children:["--receiver-registered-only",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_RECEIVER_REGISTERED_ONLY。"]}),"\n",(0,s.jsxs)(n.li,{children:["--receiver-replace-pending",(0,s.jsx)(n.br,{}),"\n","包含标志 FLAG_RECEIVER_REPLACE_PENDING。"]}),"\n",(0,s.jsxs)(n.li,{children:["--selector",(0,s.jsx)(n.br,{}),"\n","需要使用 -d 和 -t 选项以设置 intent 数据和类型。"]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"uri-component-package",children:["URI component package",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#uri-component-package",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"如果不受上述某一选项的限制，您可以直接指定 URI、软件包名称和组件名称。当参数不受限制时，如果参数包含一个“:”（冒号），则此工具假定参数是一个 URI；如果参数包含一个“/”（正斜杠），则此工具假定参数是一个组件名称；否则，此工具假定参数是一个软件包名称。"})]})}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}let a=l;l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["v1%2F%E9%AB%98%E7%BA%A7%2Fshell%2FamCommand.md"]={toc:[{text:"am 命令",id:"am-命令",depth:2},{text:"start [options] intent",id:"start-options-intent",depth:3},{text:"startservice [options] intent",id:"startservice-options-intent",depth:3},{text:"force-stop package",id:"force-stop-package",depth:3},{text:"kill [options] package",id:"kill-options-package",depth:3},{text:"kill-all",id:"kill-all",depth:3},{text:"broadcast [options] intent",id:"broadcast-options-intent",depth:3},{text:"instrument [options] component",id:"instrument-options-component",depth:3},{text:"dumpheap [options] process file",id:"dumpheap-options-process-file",depth:3},{text:"monitor [options] 启动对崩溃或 ANR 的监控。",id:"monitor-options-启动对崩溃或-anr-的监控",depth:3},{text:"screen-compat {on|off} package",id:"screen-compat-onoff-package",depth:3},{text:"display-size [reset|widthxheight]",id:"display-size-resetwidthxheight",depth:3},{text:"display-density dpi",id:"display-density-dpi",depth:3},{text:"to-uri intent",id:"to-uri-intent",depth:3},{text:"to-intent-uri intent",id:"to-intent-uri-intent",depth:3},{text:"intent 参数的规范",id:"intent-参数的规范",depth:3},{text:"URI component package",id:"uri-component-package",depth:4}],title:"",headingTitle:"",frontmatter:{}}}}]);